<h1 class="text-center my-5 font-semibold">Chat Page</h1>

{{ dropzone.create(url_for('gpt.upload'))}}

<div class="bg-gray-800 h-screen flex flex-col justify-between">
    <!-- Top Section with Boxes -->
    <div class="grid grid-cols-3 gap-3 p-4">
        <!-- AI Agent Boxes -->
        <a href="#" class="bg-white shadow-lg rounded-lg p-4">
            <span class="text-gray-500">AI Agent 1</span>
        </a>
        <a href="#" class="bg-white shadow-lg rounded-lg p-4">
            <span class="text-gray-500">AI Agent 2</span>
        </a>
        <a href="#" class="bg-white shadow-lg rounded-lg p-4">
            <span class="text-gray-500">AI Agent 3</span>
        </a>
    </div>

    <!-- Chat Section -->
    <div id="chat-box" class="flex-1 p-4 overflow-y-auto text-white">
        <!-- Placeholder for chat responses -->
    </div>

    <!-- Input Section -->
    <div class="p-4 bg-gray-800 text-black shadow-md flex">
        <input id="message-input" type="text"
            class="flex-1 border border-gray-800 rounded-lg p-2 mr-2 text-white bg-gray-700"
            placeholder="Type a message...">
        <button id="voice-input-btn" class="bg-gray-200 text-black px-4 py-2 rounded-lg mr-2">ðŸŽ¤</button>
        <button id="attach-btn" class="bg-gray-200 text-black px-4 py-2 rounded-lg mr-2">ðŸ“Ž</button>
        <button id="send-btn" class="bg-blue-500 text-white px-4 py-2 rounded-lg">Send</button>
    </div>

    <script>
        document.getElementById('send-btn').addEventListener('click', function () {
            const message = document.getElementById('message-input').value.trim();

            if (message) {
                addUserMessage(message);
                // Clear the input field
                document.getElementById('message-input').value = '';

                // Determine the response based on the user's input
                let response = '';
                if (message.toLowerCase() === 'what is kunway enterprises?') {
                    response = 'Kunway Enterprises is a Malaysian company that began in the agricultural sector and has grown into a multifaceted conglomerate. Their activities include the production and export of high-quality agricultural products such as durians, bird nests, and palm oil. They also offer shared management services, IT solutions, and investment opportunities.';
                } else if (message.toLowerCase() === 'what services does kunway enterprises offer?') {
                    response = 'Kunway Enterprises offers services including shared management, IT solutions, and investment opportunities.';
                } else if (message.toLowerCase() === 'where is kunway enterprises located?') {
                    response = 'Kunway Enterprises is based in Malaysia.';
                } else {
                    response = 'I am not sure how to respond to that. Can you please rephrase your question?';
                }

                // Add a 3-second delay before showing the response
                setTimeout(() => {
                    addChatResponse(response);
                }, 3000); // 3000 milliseconds = 3 seconds
            }
        });

        function addUserMessage(message) {
            const chatBox = document.getElementById('chat-box');
            const userMessageDiv = document.createElement('div');
            userMessageDiv.classList.add('bg-blue-500', 'text-white', 'p-4', 'rounded-lg', 'mb-2', 'self-start', 'max-w');
            userMessageDiv.textContent = message;
            chatBox.appendChild(userMessageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function addChatResponse(response) {
            const chatBox = document.getElementById('chat-box');
            const responseDiv = document.createElement('div');
            responseDiv.classList.add('bg-gray-200', 'text-black', 'p-4', 'rounded-lg', 'mb-2', 'self-end', 'max-w');
            responseDiv.textContent = response;
            chatBox.appendChild(responseDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</div>